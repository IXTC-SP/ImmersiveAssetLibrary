<div class="card-body w-100">
  <!-- tab contents -->
  <% if(profile !== "edit"){%>
  <form method="POST" action="/<%= user._id %>/dashboard/profile">
    <div class="card-body">
      <!-- email -->
      <div class="row">
        <div class="col-sm-3">
          <p class="mb-0">Email</p>
        </div>
        <div class="col-sm-9">
          <input
            type="hidden"
            name="email"
            value="<%= user.email %>"
            class="text-muted mb-0"
          /><%= user.email %>
        </div>
      </div>
      <!-- Account Type-->
      <div class="row">
        <div class="col-sm-3">
          <p class="mb-0">Account Type</p>
        </div>
        <div class="col-sm-9">
          <% if(user.isAdmin ){%>
          <input
            type="hidden"
            name="credits"
            value="Admin"
            class="text-muted mb-0"
          />Admin <%} else {%>
          <input
            type="hidden"
            name="credits"
            value="Admin"
            class="text-muted mb-0"
          />Student <%}%>
        </div>
      </div>
      <!-- Account Type-->
      <div class="row">
        <div class="col-sm-3">
          <p class="mb-0">Uploads</p>
        </div>
        <div class="col-sm-9">
          <input
            type="hidden"
            name="credits"
            value="3"
            class="text-muted mb-0"
          />3
        </div>
      </div>
      <!-- edit button-->
      <div class="row align-items-center">
        <div class="col-sm-3">
          <p class="mb-0">Password</p>
        </div>

        <div class="col-sm-9">
          <button type="submit" class="btn theme-color btn-rounded">
            <i class="fa-solid fa-pen me-2" aria-hidden="true"></i>Change
            Password
          </button>
        </div>
      </div>
    </div>
  </form>
  <%}else{%>
  <form method="POST" action="/<%= user._id %>/dashboard/profile?_method=PATCH">
    <div class="card-body">
      <!-- email -->
      <div class="row">
        <div class="col-sm-3">
          <p class="mb-0">Email</p>
        </div>
        <div class="col-sm-9">
          <input
            type="hidden"
            name="email"
            value="<%= user.email %>"
            class="text-muted mb-0"
          /><%= user.email %>
        </div>
      </div>
      <!-- Account Type-->
      <div class="row">
        <div class="col-sm-3">
          <p class="mb-0">Account Type</p>
        </div>
        <div class="col-sm-9">
          <% if(user.isAdmin ){%>
          <input
            type="hidden"
            name="credits"
            value="Admin"
            class="text-muted mb-0"
          />Admin <%} else {%>
          <input
            type="hidden"
            name="credits"
            value="Admin"
            class="text-muted mb-0"
          />Student <%}%>
        </div>
      </div>
      <!-- Account Type-->
      <div class="row">
        <div class="col-sm-3">
          <p class="mb-0">Uploads</p>
        </div>
        <div class="col-sm-9">
          <input
            type="hidden"
            name="credits"
            value="3"
            class="text-muted mb-0"
          />3
        </div>
      </div>
      <!-- pw-->
      <div class="row align-items-center">
        <div class="col-sm-3">
          <p class="mb-0">New Password</p>
        </div>
        <div class="col-sm-9">
          <input type="password" name="password" required="" id="id_password" />
          <i
            class="far fa-eye"
            id="togglePassword"
            style="margin-left: -30px; cursor: pointer"
          ></i>
        </div>
      </div>
      <!-- confirm pw-->
      <div class="row align-items-center">
        <div class="col-sm-3">
          <p class="mb-0">ConfirmPassword</p>
        </div>
        <div class="col-sm-9">
          <input
            type="password"
            name="confirmPassword"
            required=""
            id="id_confirmPassword"
          />
          <i
            class="far fa-eye"
            id="toggleConfirmPassword"
            style="margin-left: -30px; cursor: pointer"
          ></i>
        </div>
      </div>
      <div class="mb-3">
        <%if(errorObj.error){%>
        <!-- <i class="fa-solid fa-circle-exclamation error-message align-self-center px-2"></i> -->
        <p class="error-message m-0"><%= errorObj.message %></p>
        <%}%>
      </div>
      <div class="col-sm-9">
        <button type="submit" class="btn theme-color btn-rounded">
          <i class="fa-solid fa-pen me-2" aria-hidden="true"></i>cancel
        </button>
      </div>
      <div class="col-sm-9">
        <button type="submit" class="btn theme-color btn-rounded">
          <i class="fa-solid fa-pen me-2" aria-hidden="true"></i>Save Password
        </button>
      </div>
    </div>
  </form>
  <%}%>
</div>
<script>
  // Change the type of input to password or text
  const togglePassword = document.querySelector("#togglePassword");
  const toggleConfirmPassword = document.querySelector(
    "#toggleConfirmPassword"
  );
  const password = document.querySelector("#id_password");
  const confirmPassword = document.querySelector("#id_confirmPassword");

  toggleConfirmPassword.addEventListener("click", function () {
    Toggle(confirmPassword, toggleConfirmPassword);
  });
  togglePassword.addEventListener("click", function () {
    Toggle(password, togglePassword);
  });
  const Toggle = (id, icon) => {
    // toggle the type attribute
    const type = id.getAttribute("type") === "password" ? "text" : "password";
    id.setAttribute("type", type);
    // toggle the eye slash icon
    icon.classList.toggle("fa-eye-slash");
  };
</script>
